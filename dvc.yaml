stages:
  NH2OTrajectory:
    cmd: zntrack run humf_experiments.nodes.n_h2o_trajectory.NH2OTrajectory --name
      NH2OTrajectory
    deps:
    - data/h2o_trajectory
    params:
    - NH2OTrajectory
    outs:
    - nodes/NH2OTrajectory/dumped_forces.txt
    - nodes/NH2OTrajectory/energy.xvg
    - nodes/NH2OTrajectory/reduced.gro
    metrics:
    - nodes/NH2OTrajectory/node-meta.json:
        cache: false
  CreateGromacsDataset:
    cmd: zntrack run humf_experiments.nodes.create_gromacs_dataset.CreateGromacsDataset
      --name CreateGromacsDataset
    deps:
    - nodes/NH2OTrajectory/dumped_forces.txt
    - nodes/NH2OTrajectory/energy.xvg
    - nodes/NH2OTrajectory/node-meta.json
    - nodes/NH2OTrajectory/reduced.gro
    outs:
    - nodes/CreateGromacsDataset/data
    metrics:
    - nodes/CreateGromacsDataset/node-meta.json:
        cache: false
  ConvertTrajectoryToOrcaInputs:
    cmd: zntrack run 
      humf_experiments.nodes.convert_trajectory_to_orca_inputs.ConvertTrajectoryToOrcaInputs
      --name ConvertTrajectoryToOrcaInputs
    deps:
    - nodes/NH2OTrajectory/dumped_forces.txt
    - nodes/NH2OTrajectory/energy.xvg
    - nodes/NH2OTrajectory/node-meta.json
    - nodes/NH2OTrajectory/reduced.gro
    params:
    - ConvertTrajectoryToOrcaInputs
    outs:
    - nodes/ConvertTrajectoryToOrcaInputs/frames
    metrics:
    - nodes/ConvertTrajectoryToOrcaInputs/node-meta.json:
        cache: false
  CreateOrcaDataset:
    cmd: zntrack run humf_experiments.nodes.create_orca_dataset.CreateOrcaDataset
      --name CreateOrcaDataset
    deps:
    - nodes/ConvertTrajectoryToOrcaInputs/frames
    - nodes/ConvertTrajectoryToOrcaInputs/node-meta.json
    outs:
    - nodes/CreateOrcaDataset/data
    metrics:
    - nodes/CreateOrcaDataset/node-meta.json:
        cache: false
  TrainModel:
    cmd: zntrack run humf_experiments.nodes.train_model.TrainModel --name TrainModel
    deps:
    - nodes/CreateGromacsDataset/data
    - nodes/CreateGromacsDataset/node-meta.json
    params:
    - TrainModel
    outs:
    - nodes/TrainModel/logs
    - nodes/TrainModel/models
    metrics:
    - nodes/TrainModel/node-meta.json:
        cache: false
  evaluate_models:
    cmd: zntrack run humf_experiments.nodes.evaluate_models.EvaluateModels --name
      evaluate_models
    deps:
    - nodes/create_dataset/data
    - nodes/create_dataset/node-meta.json
    - nodes/train_model/logs
    - nodes/train_model/models
    - nodes/train_model/node-meta.json
    outs:
    - nodes/evaluate_models/results
    metrics:
    - nodes/evaluate_models/node-meta.json:
        cache: false
  EvaluateModels:
    cmd: zntrack run humf_experiments.nodes.evaluate_models.EvaluateModels --name
      EvaluateModels
    deps:
    - nodes/CreateGromacsDataset/data
    - nodes/CreateGromacsDataset/node-meta.json
    - nodes/TrainModel/logs
    - nodes/TrainModel/models
    - nodes/TrainModel/node-meta.json
    outs:
    - nodes/EvaluateModels/results
    metrics:
    - nodes/EvaluateModels/node-meta.json:
        cache: false
  TrainModel_1:
    cmd: zntrack run humf_experiments.nodes.train_model.TrainModel --name TrainModel_1
    deps:
    - nodes/CreateOrcaDataset/data
    - nodes/CreateOrcaDataset/node-meta.json
    params:
    - TrainModel_1
    outs:
    - nodes/TrainModel_1/logs
    - nodes/TrainModel_1/models
    metrics:
    - nodes/TrainModel_1/node-meta.json:
        cache: false
  EvaluateModels_1:
    cmd: zntrack run humf_experiments.nodes.evaluate_models.EvaluateModels --name
      EvaluateModels_1
    deps:
    - nodes/CreateOrcaDataset/data
    - nodes/CreateOrcaDataset/node-meta.json
    - nodes/TrainModel_1/logs
    - nodes/TrainModel_1/models
    - nodes/TrainModel_1/node-meta.json
    outs:
    - nodes/EvaluateModels_1/results
    metrics:
    - nodes/EvaluateModels_1/node-meta.json:
        cache: false
